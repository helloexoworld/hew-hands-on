<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <title>Fetch API - Warp10 Documentation</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon"/>
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>

  <style>
    body {
      background-color: #eeeeee;
    }
  </style>


  <link rel="stylesheet" href="/assets/bootstrap.min.css">
  <link rel="stylesheet" href="/assets/font-awesome.min.css">
  <link rel="stylesheet" href="/assets/https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" />

  <script src="/assets/webcomponents-lite.js"></script>
  <script src="/assets/jquery.js"></script>
  <script src="/assets/bootstrap.js"></script>

  <link rel="import" href="/assets/warp10-components.html">

  <!--
  <script src="http://localhost:8000/bower_components/webcomponentsjs/webcomponents-lite.js"></script>
  <script src="http://localhost:8000/bower_components/jquery/dist/jquery.js"></script>
  <script src="http://localhost:8000/bower_components/bootstrap/dist/js/bootstrap.js"></script>
  <link   rel="import" href="http://localhost:8000/bower_components/polymer/polymer.html">
  <link   rel="import" href="http://localhost:8000/bower_components/warp10-navbar/warp10-navbar.html">
  <link   rel="import" href="http://localhost:8000/bower_components/warp10-quantum/warp10-conf.html">
  <link   rel="import" href="http://localhost:8000/bower_components/warp10-quantum/warp10-quantum-widget.html">
  -->

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/docs/css/warp10.css">
  <link rel="stylesheet" href="/docs/css/warp10-navbar.css">
  <!-- Pygments Github CSS -->
  <link rel="stylesheet" href="/docs/css/syntax.css">

  <style>
    :host {
      display: block;
    }
    .top-10 { margin-top:10px; }
    h4 {
      font-weight: bold;
    }
    .list-group-item {
      cursor: pointer;
    }
  </style>
</head>

<body>
  
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">

    <div class="navbar-header">
      <!--
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    -->
      <a class="navbar-brand" href="/docs">
        <div class="navbar-id">
          <div class="navbar-id-icon">
            <span id="icon-CityzenData" class="icon-CityzenData"></span>
          </div>
          <div class="navbar-id-name">
            Warp 10
          </div>
        </div>
      </a>
    </div>
    <div class="collapse navbar-nav navbar-collapse navbar-right">
      <div class="form-inline">
        <div class="input-group">
          <div class="input-group-addon"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></div>
          <input id="search_box" class="form-control" style="vertical-align: middle" >
        </div>
      </div>
    </div>
  </div>
</nav>
<div class="navbar-separator" > </div>

<warp10-conf conf="doc"></warp10-conf>

<div id="mainbody">

  <div class="container top-10" id="main-container">
    <div class="row">
      <button type="button" class="navbar-toggle toggle collapsed" data-toggle="collapse" data-target="#sidebar" aria-expanded="false">
  <span class="sr-only">Toggle navigation</span>
  <span class="icon-bar"></span>
  <span class="icon-bar"></span>
  <span class="icon-bar"></span>
</button>
<div id="sidebar" class="col-sm-3 collapse">

  <div class="panel-group" id="side-menu">

    <div id="panel-home" class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      <a data-toggle="collapse" data-parent="#side-menu" href="#collapse-home">
        <span class="glyphicon glyphicon-home"></span>Home</a>
    </h4>
  </div>
  <div id="collapse-home" class="panel-collapse collapse ">
    <div class="list-group">

      <a class="list-group-item" href="/docs/introduction/platform">Overview</a>

      <a class="list-group-item" href="/docs/introduction/concepts">Concepts</a>

      <a class="list-group-item" href="/docs/introduction/history">History</a>

      <a class="list-group-item" href="/docs/introduction/team">Team</a>

      <a class="list-group-item" href="/docs/introduction/versions">Versions</a>

    </div>

  </div>
</div>


    <div id="panel-howto" class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      <a data-toggle="collapse" data-parent="#side-menu" href="#collapse-howto">
        <span class="glyphicon glyphicon-education"></span>How-to
      </a>
    </h4>
  </div>
  <div id="collapse-howto" class="panel-collapse collapse ">
    <div class="list-group">

      <a class="list-group-item" href="/docs/getting-started">Getting started</a>

      <a class="list-group-item" href="/docs/howto/data-modeling">Data modeling</a>

      <a class="list-group-item" href="/docs/howto/migrate-from">Migrate from</a>
      <div class="list-group-item">Tutorials</div>
      <div class="list-group">
        <a class="list-group-item" href="/docs/howto/intro-bucketize">BUCKETIZE</a>
        <a class="list-group-item" href="/docs/howto/intro-reduce">REDUCE</a>
      </div>

      <a class="list-group-item" href="/docs/howto/pushing-data">Pushing data</a>
      <div class="list-group">
        <a class="list-group-item" href="/docs/howto/websocket-push">Using WebSockets</a>
        <a class="list-group-item" href="/docs/howto/collecting-tools">Using metrics collecting tools</a>
      </div>

      <a class="list-group-item" href="/docs/howto/accessing-data">Accessing data</a>

      <a class="list-group-item" href="/docs/howto/fetching-data">Fetching data</a>

      <a class="list-group-item" href="/docs/howto/create-a-udf">Create and deploy one User Defined Function</a>
      
      <a class="list-group-item" href="/docs/howto/create-a-warpscript-extension">Create a WarpScript extension</a>

      <a class="list-group-item" href="/docs/howto/connect-zeppelin">Connect Warp&nbsp;10 to Apache Zeppelin</a>


      <a class="list-group-item" href="/howto/monitoring-warp-10-using-warp-10">Monitoring Warp&nbsp;10</a>
    </div>

  </div>
</div>


    <div id="panel-tutorial" class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      <a data-toggle="collapse" data-parent="#side-menu" href="#collapse-apis">
        <span class="glyphicon glyphicon-tasks"></span>APIs
      </a>
    </h4>
  </div>
  <div id="collapse-apis" class="panel-collapse collapse  in ">
    <div class="list-group">
      <a class="list-group-item" href="/docs/apis/">Overview</a>

      <a class="list-group-item" href="/docs/apis/warpscript">WarpScript</a>

      <a class="list-group-item" href="/docs/apis/fetch">Fetch</a>

      <a class="list-group-item" href="/docs/apis/ingress">Ingress</a>

      <a class="list-group-item" href="/docs/apis/delete">Delete</a>

      <a class="list-group-item" href="/docs/apis/gts-input-format">GTS input format</a>

      <a class="list-group-item" href="/docs/apis/gts-output-format">GTS output format</a>

    </div>

  </div>
</div>


    <div id="panel-reference" class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      <a data-toggle="collapse" data-parent="#side-menu" href="#collapse-reference">
        <span class="glyphicon glyphicon-cog"></span>WarpScript</a>
    </h4>
  </div>
  <div id="collapse-reference" class="panel-collapse collapse ">
    <div class="list-group">
      <a class="list-group-item" href="/docs/reference/">Overview</a>

      <div class="list-group-item">
        <a href="/docs/reference/reference">Reference</a>
      </div>
      <div class="list-group" id="collapse-reference-list">
        <a class="list-group-item" href="/docs/reference/reference#frameworks">Frameworks</a>
        <a class="list-group-item" href="/docs/reference/reference#functions-constant">Constant</a>
        <a class="list-group-item" href="/docs/reference/reference#functions-math">Mathematical</a>
        <a class="list-group-item" href="/docs/reference/reference#functions-standalone">Standalone</a>
        <a class="list-group-item" href="/docs/reference/reference#functions-lists-maps">Lists &amp; maps</a>
        <a class="list-group-item" href="/docs/reference/reference#functions-logic">Logic</a>
        <a class="list-group-item" href="/docs/reference/reference#functions-stack">Stack</a>
        <a class="list-group-item" href="/docs/reference/reference#functions-platform">Platform</a>
        <a class="list-group-item" href="/docs/reference/reference#functions-gts">Geo Time Series<sup>®</sup></a>
        <a class="list-group-item" href="/docs/reference/reference#functions-bucketized-gts">Bucketized GTS</a>
        <a class="list-group-item" href="/docs/reference/reference#functions-geo">Geo-related</a>
      </div>
      <a class="list-group-item" href="/docs/reference/miscellaneous">Miscellaneous functions</a>
      <a class="list-group-item" href="/docs/reference/processing">Working with Processing</a>
    </div>
  </div>
</div>


    <div id="panel-tools" class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      <a data-toggle="collapse" data-parent="#side-menu" href="#collapse-tools">
        <span class="glyphicon glyphicon-wrench"></span>Tools</a>
    </h4>
  </div>
  <div id="collapse-tools" class="panel-collapse collapse ">
    <div class="list-group">
      <div class="list-group-item">
        <a href="/tools/github_repositories">Github repositories</a>
      </div>
      <div class="list-group" id="collapse-git-list">
        <a class="list-group-item" href="/tools/github_repositories#Platform">Platform</a>
        <a class="list-group-item" href="/tools/github_repositories#Batch">Batch</a>
        <a class="list-group-item" href="/tools/github_repositories#Stream">Stream</a>
        <a class="list-group-item" href="/tools/github_repositories#Inputs">Input plugins</a>
        <a class="list-group-item" href="/tools/github_repositories#Outputs">Output plugins</a>
        <a class="list-group-item" href="/tools/github_repositories#Interpreters">Interpreters</a>
        <a class="list-group-item" href="/tools/github_repositories#IoT">IoT</a>
        <a class="list-group-item" href="/tools/github_repositories#UDFs">WarpScript UDFs</a>
        <a class="list-group-item" href="/tools/github_repositories#Extensions">WarpScript extensions</a>
        <a class="list-group-item" href="/tools/github_repositories#Websites">Websites</a>
        <a class="list-group-item" href="/tools/github_repositories#External">External contributions</a>
      </div>
      <a class="list-group-item" href="/docs/tools/worf">Worf</a>
      <a class="list-group-item" href="/docs/tools/quantum">Quantum</a>
      <a class="list-group-item" href="/docs/tools/trl">Token Revocation List</a>

    </div>

  </div>
</div>


    <div id="panel-support" class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      <a href="/docs/introduction/support/">
        <span class="glyphicon glyphicon-ok-circle"></span>Support
      </a>
    </h4>
  </div>
</div>



  </div>

</div>

      <div class="col-sm-9">
        <h1>Fetch API</h1>
        <p>The Fetch API allows to recover raw GTS data in a extremely quick and efficient way.</p>

<p>The HTTP endpoint used by the Fetch API is <code>https://API_ENDPOINT/api/vX/fetch</code>, where <code>API_ENDPOINT</code> is a
<a href="/docs/apis">valid  endpoint</a> for the Warp 10 instance and <code>vX</code>is the version of the API you want to use (currently <code>v0</code>).
The Fetch API <strong>must</strong> be accessed using the <em>GET</em> method.</p>

<h4 id="request-header">Request Header</h4>

<p>To be authenticated you need to add a <code>X-Warp10-Token</code> header with your <strong>read</strong> token.</p>

<div class="panel panel-default">
  <div class="panel-body">
    <table class="table">
    <thead>
      <tr>
        <th>Header</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>X-Warp10-Token</code></td>
        <td>A valid read token</td>
      </tr>
    </tbody>
  </table>
  </div>
</div>

<p>As modifying request headers can be difficult with certain HTTP clients, there is a fallback authentication mode: if headers can’t be used, the token can be passed in a request parameter <code>token</code>.</p>

<h4 id="request-parameters">Request parameters</h4>

<p>The Fetch API request asks for the following parameters:</p>

<ul>
  <li>
    <p><code>selector</code>: the selector is a string that allow us to select one or several GTS. Its composed of the concatenation of a classname selector and a labels selector.</p>

    <p>The class name selector is a string which represents an exact match if it starts with an ‘=’, or a regular expression that the class name must match if it starts with ‘~’.</p>

    <p>The labels selector is a string delimited by curly brackets (<code>{}</code>) with a list of comma separated label selectors. Each of these label selectors is composed of the label name and the value of the associated selector. Those selectors can also be exact matches if they start with ‘=’ or a regular expression if they start with ‘~’.</p>

    <p>Example:</p>

    <p><code>~com.cityzendata.test.*{freq~2.*,steps=100}</code></p>

    <p>It selects all GTS whose classnames begin with <em>com.cityzendata.test</em> and whose label <em>steps</em> has a value of 100 and whose label <em>freq</em> begins with 2.</p>
  </li>
  <li>
    <p><code>format</code>: the format of the response data. Current available formats are:</p>

    <ul>
      <li><code>text</code></li>
      <li><code>fulltext</code></li>
    </ul>
  </li>
  <li>
    <p><code>dedup</code>: if this parameter is true, sequences of successive datapoints with the same locations and value are compressed in the response, giving only the first and the last datapoints in the sequence.</p>

    <p>Example:</p>

    <ul>
      <li>
        <p>Response to request without <code>dedup</code>:</p>

        <p>1434590504758000// com.cityzendata.test.sinusoide{steps=100,.app=com.cityzendata.drill.test} 42
  1434590288758000// com.cityzendata.test.sinusoide{steps=100,.app=com.cityzendata.drill.test} 42
  1434590072758000// com.cityzendata.test.sinusoide{steps=100,.app=com.cityzendata.drill.test} 42
  1434589856758000// com.cityzendata.test.sinusoide{steps=100,.app=com.cityzendata.drill.test} 42
  1434589640758000// com.cityzendata.test.sinusoide{steps=100,.app=com.cityzendata.drill.test} 43
  1434589424758000// com.cityzendata.test.sinusoide{steps=100,.app=com.cityzendata.drill.test} 44</p>
      </li>
      <li>
        <p>Response to request with <code>dedup</code></p>

        <p>1434590504758000// com.cityzendata.test.sinusoide{steps=100,.app=com.cityzendata.drill.test} 42
  1434589856758000// com.cityzendata.test.sinusoide{steps=100,.app=com.cityzendata.drill.test} 42
  1434589640758000// com.cityzendata.test.sinusoide{steps=100,.app=com.cityzendata.drill.test} 43
  1434589424758000// com.cityzendata.test.sinusoide{steps=100,.app=com.cityzendata.drill.test} 44</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Fetching interval parameters: either</p>

    <ul>
      <li><code>start</code> and <code>stop</code>: the start and end timestamps defining the interval of the GTS to fetch. They are both in <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO8601</a> format, <em>i.e.</em> <strong>YYYY-MM-DDTHH:MM:SS.SSSSSSZ</strong>. Only those readings whose timestamps lie between those two timestamps (most recent inclusive, oldest exclusive) will be retained.</li>
    </ul>

    <p>Or</p>

    <ul>
      <li>
        <p><code>now</code> and <code>timespan</code>: instead of the basic interval search, with the start and end timestamps in ISO8601 format, you can use two alternative formats for the interval parameters:</p>

        <ol>
          <li>
            <p>If you want to fetch readings whose timestamps lie in a specific timespan before a timestamp (for example all the readings in the last minute) you can use the end timestamp (in microseconds since the Unix epoch) as <code>now</code> parameter and the timespan (in microseconds) as <code>timespan</code>.</p>
          </li>
          <li>
            <p>If you want to recover the last <code>n</code> readings before a given instant, you can use the instant timestamp (in microseconds since the Unix epoch) as <code>now</code> parameter and <code>-n</code> as <code>timespan</code>.</p>
          </li>
        </ol>
      </li>
    </ul>
  </li>
</ul>

<h4 id="example">Example</h4>

<pre><code>GET /api/v0/fetch?now=1435091737000000&amp;timespan=-10&amp;selector=com.cityzendata.test.sinusoide{steps=100} HTTP/1.1
Host: host
</code></pre>

<h4 id="response">Response</h4>

<p>The format of the response depends on the <code>format</code> parameter of the request.</p>

<ul>
  <li>
    <p><code>fulltext</code></p>

    <p>The <em>fulltext</em> format uses the <a href="/docs/apis/gts-input-format">GTS Input Format</a> as output format.</p>

    <p>Example:</p>

    <pre><code>1434590504758000// com.cityzendata.test.sinusoide{steps=100,.app=com.cityzendata.drill.test} -0.6133061918698982
1434590288758000// com.cityzendata.test.sinusoide{steps=100,.app=com.cityzendata.drill.test} 0.9228427144511169
1434590072758000// com.cityzendata.test.sinusoide{steps=100,.app=com.cityzendata.drill.test} 0.1301889411087915
1434589856758000// com.cityzendata.test.sinusoide{steps=100,.app=com.cityzendata.drill.test} -0.9909979074466949
1434589640758000// com.cityzendata.test.sinusoide{steps=100,.app=com.cityzendata.drill.test} 0.38860822449533416
1434589424758000// com.cityzendata.test.sinusoide{steps=100,.app=com.cityzendata.drill.test} 0.7875576742396682
1434589208758000// com.cityzendata.test.sinusoide{steps=100,.app=com.cityzendata.drill.test} -0.8009024241854527
1434588992758000// com.cityzendata.test.sinusoide{steps=100,.app=com.cityzendata.drill.test} -0.36827736651082893
1434588776758000// com.cityzendata.test.sinusoide{steps=100,.app=com.cityzendata.drill.test} 0.993699252984253
1434588560758000// com.cityzendata.test.sinusoide{steps=100,.app=com.cityzendata.drill.test} -0.15193398008971615
</code></pre>
  </li>
  <li>
    <p><code>text</code></p>

    <p>The <em>text</em> format uses a less verbose version of the  <a href="/docs/apis/gts-input-format">GTS Input Format</a> as output format.
In this format the data for each GTS is grouped and classname and labels are only written in the first line of each group.</p>

    <p>Example:</p>

    <pre><code>1434590504758000// com.cityzendata.test.sinusoide{steps=100,.app=com.cityzendata.drill.test} -0.6133061918698982
=1434590288758000// 0.9228427144511169
=1434590072758000// 0.1301889411087915
=1434589856758000// -0.9909979074466949
=1434589640758000// 0.38860822449533416
1434590504758000/48.44348858110607:-4.407284064218402/ com.cityzendata.drill.test.sinusoide{location=true,steps=100,.app=com.cityzendata.drill.test} -0.6133061918698982
=1434590288758000/48.44348858110607:-4.407284064218402/ 0.9228427144511169
=1434590072758000/48.44348858110607:-4.407284064218402/ 0.1301889411087915
=1434589856758000/48.44348858110607:-4.407284064218402/ -0.9909979074466949
=1434589640758000/48.44348858110607:-4.407284064218402/ 0.38860822449533416
</code></pre>
  </li>
</ul>

      </div>
    </div>
  </div>
  

<!-- Footer -->
<footer>

  <hr>

  <div id="contact" class="container text-center">
    <!-- Footer -->
    <a class="webicons" href="https://twitter.com/CityzenData" target="_blank">
      <footer>
        <div id="contact" class="container text-center">
      <div class="webicon twitter"></div>
      <div class="webicon_text twitter">@CityzenData</div>
    </a>
    <a class="webicons" href="mailto:contact@cityzendata.com" target="_blank">
      <div class="webicon mail"></div>
      <div class="webicon_text mail">contact@cityzendata.com</div>
    </a>
  </div>

  <div class="container text-center top-margin">
    Copyright &copy; 2016 Cityzen Data
  </div>
  <div class="container text-center">
    <a href="/docs/introduction/legal">Legal</a>
  </div>

</footer>

<script>
    var template = document.querySelector('template[is="dom-bind"]');
</script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
apiKey: 'e3f0d4e7cfac4e1065a92f60b3ec28d1',
indexName: 'warp10',
inputSelector: '#search_box'
});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-43780642-5', 'auto');
  ga('send', 'pageview');

</script>

<!-- Start of Async Drift Code -->
<script>
!function() {
  var t;
  if (t = window.driftt = window.drift = window.driftt || [], !t.init) return t.invoked ? void (window.console && console.error && console.error("Drift snippet included twice.")) : (t.invoked = !0, 
  t.methods = [ "identify", "config", "track", "reset", "debug", "show", "ping", "page", "hide", "off", "on" ], 
  t.factory = function(e) {
    return function() {
      var n;
      return n = Array.prototype.slice.call(arguments), n.unshift(e), t.push(n), t;
    };
  }, t.methods.forEach(function(e) {
    t[e] = t.factory(e);
  }), t.load = function(t) {
    var e, n, o, i;
    e = 3e5, i = Math.ceil(new Date() / e) * e, o = document.createElement("script"), 
    o.type = "text/javascript", o.async = !0, o.crossorigin = "anonymous", o.src = "https://js.driftt.com/include/" + i + "/" + t + ".js", 
    n = document.getElementsByTagName("script")[0], n.parentNode.insertBefore(o, n);
  });
}();
drift.SNIPPET_VERSION = '0.3.1';
drift.load('pf9x6nb43t24');
</script>
<!-- End of Async Drift Code -->
</body>
</html>
